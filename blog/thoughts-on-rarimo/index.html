<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="light dark" name=color-scheme><title>My thoughts on Rarimo vs vOPRF/MPC-based approach</title><meta name=description><link href=/img/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/img/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/img/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=https://fonts.googleapis.com rel=preconnect><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css2?family=Signika&display=swap" rel=stylesheet><link href=/main.css rel=stylesheet><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}}</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js></script><script async data-goatcounter=https://curryrasul.goatcounter.com/count src=//gc.zgo.at/count.js></script><body class=post><script>if(localStorage.getItem('theme')=='dark')document.body.classList.add('dark')</script><header class=blur><div id=wrapper><nav><a href=/>curryrasul</a><span class=separator>::</span><a href=/blog>blog</a></nav><div id=btns><button aria-label="theme switch" data-moon-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill="currentColor"></path></svg>' data-sun-icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z" fill="currentColor"></path></svg>' id=theme-toggle><svg viewbox="0 0 24 24" height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill=currentColor></path></svg></button><button aria-label="table of content" id=toc-toggle><svg viewbox="0 0 24 24" height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d="M3 4H21V6H3V4ZM3 11H15V13H3V11ZM3 18H21V20H3V18Z" fill=currentColor></path></svg></button></div></div></header><div id=post-wrapper><div id=blank></div><main><div id=top></div><article><h1>My thoughts on Rarimo vs vOPRF/MPC-based approach</h1><div id=post-info><div id=date><span id=publish>2025-02-07</span></div><div id=tags><a href=https://curryrasul.com/tags/cryptography># cryptography</a><a href=https://curryrasul.com/tags/zk-id># zk-id</a></div></div><p><em>In this blog post I'm leaving my thoughts on <a rel="nofollow noreferrer" href=https://docs.rarimo.com/>Rarimo's</a> approach on solving <a rel="nofollow noreferrer" href=https://mirror.xyz/0x90699B5A52BccbdFe73d5c9F3d039a33fb2D1AF6/1JSk1fvRwpfUQhLZt1OlaBpVDkXIutVYYXdYgaukh0c>"Uniqueness, Anonymity, Eligibility - The Great Trilemma"</a> problem. It's recommended to read <a rel="nofollow noreferrer" href=https://curryrasul.com/blog/web2-nullifiers-2/>Web2 Nullifiers using vOPRF</a> for understanding.</em><h2 id=introduction>Introduction<a aria-label="Anchor link for: introduction" class=zola-anchor href=#introduction>#</a></h2><p>I wrote a few blog posts (<a rel="nofollow noreferrer" href=https://curryrasul.com/blog/web2-nullifiers/>pt.1</a>, <a rel="nofollow noreferrer" href=https://curryrasul.com/blog/web2-nullifiers-2/>pt.2</a>) about a way to generate "nullifiers" for Web2-IDs. As I said, we can build many different apps/protocols with that, including those that use "zk passport".<p>Rarimo's <a rel="nofollow noreferrer" href=https://docs.rarimo.com/freedom-tool/>Freedom Tool</a> is an attempt to build an anonymous voting protocol, with proof of eligibility based on zk passport. In general, the protocol faces the same problem. They described it in their <a rel="nofollow noreferrer" href=https://mirror.xyz/0x90699B5A52BccbdFe73d5c9F3d039a33fb2D1AF6/1JSk1fvRwpfUQhLZt1OlaBpVDkXIutVYYXdYgaukh0c>blog post</a> as "The Great Trilemma" problem:<blockquote><p>The Great Trilemma:<ul><li><strong>Uniqueness</strong>: Each user should have only one identity.<li><strong>Anonymity</strong>: No one should be able to link a user to their identity.<li><strong>Eligibility</strong>: Only those who can provide zk passport proof should be able to participate in the protocol.</ul></blockquote><p>The main point here is that:<blockquote><p>Guaranteeing one or two of them is easy, but guaranteeing all three simultaneously is incredibly difficult</blockquote><hr><p>There's no ideal solution to that problem, but there can be attempts to solve it. I'm going to list a few:<ol><li>Trusted ID provider (which runs in TEE) that generates "nullifiers" for you.<li>vOPRF-based approach.<li>Rarimo's "Incognito Passport-based protocol" approach.</ol><p>I think it's clear that the first option is not a good solution. That's why I want to focus on comparison of 2nd and 3rd options and their problems.<hr><h3 id=rarimo-s-approach>Rarimo's approach<a aria-label="Anchor link for: rarimo-s-approach" class=zola-anchor href=#rarimo-s-approach>#</a></h3><p><em>I'm not going to provide a detailed explanation of the protocol here, both because I don't know about it well enough and because I don't think it's necessary - you can read <a rel="nofollow noreferrer" href=https://mirror.xyz/0x90699B5A52BccbdFe73d5c9F3d039a33fb2D1AF6/1JSk1fvRwpfUQhLZt1OlaBpVDkXIutVYYXdYgaukh0c>Rarimo's blog post</a> for that.</em><p>Rarimo's "Incognito Passport-based protocol" is a "generalized ID infrastructure that publicly associates the user’s passport with an identity key and then reuses this association for all required cases (voting and others). This means that instead of single use cases for country-specific passports there is a huge active network of users with different characteristics that different applications can interact with.<p>In short, it's a trustless registry stored on-chain, where people can register using their passport data.<p>How it works:<ol><li>You create your key pair (sk, Pk)<li>You register your public key with zk passport proof attached and also hash(passport). You also commit to DG1 passport's data group, so that you can generate zk proofs about passport.<li>Now you can reuse your identity in different apps. nullifier = hash(sk, APP_ID)</ol><h2 id=problems-comparison>Problems & Comparison<a aria-label="Anchor link for: problems-comparison" class=zola-anchor href=#problems-comparison>#</a></h2><p>Now that you know how both protocols work, let's compare them.<p><strong>The Main problem/disadvantage of Rarimo's approach</strong> is that it relies on "privacy network effect" for anonymity (similar to Tornado Cash). What does that mean? Basically, it doesn't provide complete anonymity. During the registration process, you link hash(passport) with your identity. Governments can easily find out who's in the registry by just hashing all the passports they issued. I think that's a big problem:<ul><li>In case there's small amount of users based on certain eligibility criteria, it'll be very easy to deanonymize user and their action<li>Even if we have big amount of users - governments can still track who's in the registry. If we talk about voting in a non-democratic country, the only way to make it safe is to register a really large percentage (maybe even the majority) of users in the registry. Imo, that's only possible if Rarimo collabs with the government for that; it's a good idea, but I don't think non-democratic regimes would agree to do that. It's possible to collab with democracies though, but I don't think we even need to host that kind of voting there, because it's already honest.</ul><p><em>If we have million citizens of X country in the registry, it'll be hard to track who made what action exactly due to privacy network effect. But I don't think it's a big problem for a non-democratic country, to persecute all those million people.</em><p><strong>The Main problem/disadvantage of vOPRF/MPC-based approach</strong> is that in case of collusion of MPC nodes, it'll be possible to deanonymize users completely. Generally this scheme has many advantages as well, like:<ul><li>Provides good UX: Users don't need to go through any registration process. Instead, app creator can set the eligibility criteria, and people will be able to interact with the app right away.<li>Completely private (in case of majority of MPC nodes are honest) - there's no way to find out that a Web2 identity used the protocol (even for MPC nodes, governments, id-providers, etc.)</ul><h2 id=conclusion>Conclusion<a aria-label="Anchor link for: conclusion" class=zola-anchor href=#conclusion>#</a></h2><p>While it's hard for me to say which approach is objectively better, I believe that the vOPRF approach with MPC nodes (run in a TEE) distributed across the world would provide better privacy.<p><em>A more important point is that we can try to create a better solution by combining both approaches. For example, what if we use Rarimo's approach for registration but, instead of revealing hash(passport), we reveal vOPRF(hash(passport))? This would provide the same level of anonymity as the vOPRF/MPC-based approach, which, in my opinion, is more secure. Over time, we would also benefit from the privacy network effect similar to Rarimo. Essentially, in the worst-case scenario — if the MPC nodes collude — we would still have the anonymity provided by Rarimo’s network effect.</em><p>I'm interested in hearing your thoughts on this, so feel free to leave a comment or DM me on Telegram <a rel="nofollow noreferrer" href=https://t.me/curryrasul>@curryrasul</a>.</article><div class=giscus></div><script async crossorigin data-category=General data-category-id=DIC_kwDOHEYz584CXgMS data-emit-metadata=0 data-input-position=bottom data-lang=en data-loading=https://curryrasul.com/giscus_light.css data-mapping=pathname data-reactions-enabled=1 data-repo=curryrasul/curryrasul.github.io data-repo-id=R_kgDOHEYz5w data-strict=0 data-theme=preferred_color_scheme src=https://giscus.app/client.js></script><footer><div class=copyright><p>© Magamedrasul Ibragimov</div></footer></main><aside class=blur><nav><ul><li><a href=#introduction>Introduction</a> <ul><li><a href=#rarimo-s-approach>Rarimo's approach</a></ul><li><a href=#problems-comparison>Problems & Comparison</a><li><a href=#conclusion>Conclusion</a></ul></nav></aside></div><script src=/js/lightense.min.js></script><script src=/js/main.js></script>